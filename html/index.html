<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Transpraia Transportadora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }
    .section {
      display: none;
      padding: 40px;
      text-align: center;
    }
    .active {
      display: block;
    }
    button {
      padding: 10px 20px;
      margin: 10px 15px;
      font-size: 16px;
      background-color: #3399ff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #007acc;
    }
    input {
      margin: 10px;
      padding: 10px;
      font-size: 16px;
      width: 250px;
    }
    #logo img {
      max-width: 300px;
      height: auto;
      margin-bottom: 20px;
    }
    #map {
      height: 80vh;
      width: 100%;
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<div id="logo" class="section active">
  <img src="Copilot_20250903_080637.png" alt="">
  <h1>Bem-vindo à Transpraia Transportadora</h1>
  <button onclick="showSection('login')">Login</button>
  <button onclick="showSection('cadastro')">Cadastro</button>
</div>

<div id="login" class="section">
  <h2>Login</h2>
  <input type="text" placeholder="Usuário"><br>
  <input type="password" placeholder="Senha"><br>
  <button onclick="showSection('principal')">Entrar</button>
  <button onclick="showSection('logo')">Voltar</button>
</div>

<div id="cadastro" class="section">
  <h2>Cadastro</h2>
  <input type="text" placeholder="Nome completo"><br>
  <input type="email" placeholder="E-mail"><br>
  <input type="password" placeholder="Senha"><br>
  <button onclick="showSection('principal')">Cadastrar</button>
  <button onclick="showSection('logo')">Voltar</button>
</div>

<div id="principal" class="section">
  <h1>Bem-vindo à área principal da Transpraia 🚚</h1>
  <p>Você está logado com sucesso!</p>

  <div id="map"></div>

  <div style="margin-top: 30px;">
    <p>Entrou na conta errada ou deseja trocar de usuário?</p>
    <button onclick="confirmarSaida('login')">🔐 Voltar para Login</button>
    <button onclick="confirmarSaida('cadastro')">📝 Ir para Cadastro</button>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  let coletaAtiva = false;

  function showSection(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');

    if (id === 'principal' && !window.mapInitialized) {
      initMap();
      window.mapInitialized = true;
    }
  }

  function confirmarSaida(destino) {
    const resposta = confirm("Tem certeza que deseja sair da conta atual?");
    if (resposta) {
      showSection(destino);
    }
  }

  function initMap() {
    const map = L.map('map').setView([-15.78, -47.93], 4);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© Kauã'
    }).addTo(map);

    const estados = [
      { nome: "Paraná", lat: -24.7, lon: -51.9 },
      { nome: "São Paulo", lat: -23.5, lon: -46.6 },
      { nome: "Bahia", lat: -12.9, lon: -38.5 },
      { nome: "Minas Gerais", lat: -19.9, lon: -43.9 },
      { nome: "Rio de Janeiro", lat: -22.9, lon: -43.2 },
      { nome: "Rio Grande do Sul", lat: -30.0, lon: -51.2 },
      { nome: "Santa Catarina", lat: -27.6, lon: -48.5 },
      { nome: "Pernambuco", lat: -8.0, lon: -34.9 },
      { nome: "Amazonas", lat: -3.1, lon: -60.0 },
      { nome: "Distrito Federal", lat: -15.8, lon: -47.9 }
    ];

    estados.forEach(e => {
      L.circleMarker([e.lat, e.lon], {
        radius: 10,
        color: "#003366",
        fillColor: "#3399ff",
        fillOpacity: 0.8
      }).addTo(map).on('click', () => {
        coletaAtiva = true;
      });
    });

    map.on('click', function(e) {
      if (!coletaAtiva) return;

      const latlng = e.latlng;

      const formHtml = `
        <div style="font-family: Arial; font-size: 14px;">
          <label>Rua: <input type="text" id="rua" /></label><br>
          <label>CPF: <input type="text" id="cpf" /></label><br>
          <label>Bairro: <input type="text" id="bairro" /></label><br>
          <label>Número: <input type="text" id="numero" /></label><br>
          <label>Destinatário: <input type="text" id="destinatario" /></label><br>
          <button onclick="enviarDados()">Enviar</button>
        </div>
      `;

      L.popup()
        .setLatLng(latlng)
        .setContent(formHtml)
        .openOn(map);

      coletaAtiva = false;
    });

    window.enviarDados = function() {
      const rua = document.getElementById('rua').value;
      const cpf = document.getElementById('cpf').value;
      const bairro = document.getElementById('bairro').value;
      const numero = document.getElementById('numero').value;
      const destinatario = document.getElementById('destinatario').value;

      console.log("📦 Dados da entrega:");
      console.log("Rua:", rua);
      console.log("CPF:", cpf);
      console.log("Bairro:", bairro);
      console.log("Número:", numero);
      console.log("Destinatário:", destinatario);

      alert("Dados enviados com sucesso!");
      map.closePopup();
    };
  }
</script>

</body>
</html>
